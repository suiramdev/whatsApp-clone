(this.webpackJsonpwhatsapp_clone=this.webpackJsonpwhatsapp_clone||[]).push([[0],{57:function(e,t,a){e.exports=a(81)},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(27),s=a.n(c),o=(a(62),a(11)),i=a(12),l=a(14),u=a(13),m=(a(63),a(15)),h=(a(64),a(109)),d=a(100),p=a(101),f=a(102),v=a(24),E=a(41),b=(a(65),a(82),a(67),E.a.initializeApp({apiKey:"AIzaSyD-T3lWYdPadfLTy0kHAgZjRsacvDpDklU",authDomain:"whatsapp-clone-9fd22.firebaseapp.com",databaseURL:"https://whatsapp-clone-9fd22.firebaseio.com",projectId:"whatsapp-clone-9fd22",storageBucket:"whatsapp-clone-9fd22.appspot.com",messagingSenderId:"1017784785482",appId:"1:1017784785482:web:6c34cb077157fff88c24b3",measurementId:"G-93EWC01NLS"})),_=E.a.firestore(),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.emailInput=r.a.createRef(),n.passwordInput=r.a.createRef(),n.confirmPasswordInput=r.a.createRef(),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.generateID=n.generateID.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"generateID",value:function(){return Math.floor(1e5+9e5*Math.random())}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.passwordInput.current.value===this.confirmPasswordInput.current.value?b.auth().createUserWithEmailAndPassword(this.emailInput.current.value,this.passwordInput.current.value).then(function(){this.setState({success:"You have signed up successfully"}),_.collection("users").doc(b.auth().currentUser.uid).set({id:this.generateID(),email:this.emailInput.current.value})}.bind(this)).catch(function(e){this.setState({error:e.message})}.bind(this)):this.setState({error:"The passwords mismatch"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"register"},r.a.createElement("form",{className:"register__form",onSubmit:this.handleSubmit},r.a.createElement(d.a,{className:"register__form-logo"}),this.state.error?r.a.createElement(h.a,{severity:"error"},this.state.error):null,this.state.success?r.a.createElement(h.a,{severity:"success"},this.state.success):null,r.a.createElement("div",{className:"register__form-input"},r.a.createElement(p.a,null),r.a.createElement("input",{ref:this.emailInput,type:"email",placeholder:"Email",required:!0})),r.a.createElement("div",{className:"register__form-input"},r.a.createElement(f.a,null),r.a.createElement("input",{ref:this.passwordInput,type:"password",placeholder:"Password",required:!0})),r.a.createElement("div",{className:"register__form-input"},r.a.createElement(f.a,null),r.a.createElement("input",{ref:this.confirmPasswordInput,type:"password",placeholder:"Confirm password",required:!0})),r.a.createElement("div",{id:"recaptcha-container"}),r.a.createElement("input",{className:"register__form-submit",type:"submit",value:"SIGN UP"}),r.a.createElement(v.b,{className:"register__form-more",to:"/LogIn"},"I already have an account")))}}]),a}(n.Component),y=(a(74),a(103)),w=a(38),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.emailInput=r.a.createRef(),n.passwordInput=r.a.createRef(),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.emailInput.current,a=this.passwordInput.current;b.auth().signInWithEmailAndPassword(t.value,a.value).catch(function(e){this.setState({error:e.message})}.bind(this))}},{key:"render",value:function(){return r.a.createElement(w.b.div,{className:"login",initial:{x:"-100vw"},animate:{x:0,transition:{duration:1}}},r.a.createElement(v.b,{className:"login__return",to:"/"},r.a.createElement(y.a,null)),r.a.createElement("form",{className:"login__form",onSubmit:this.handleSubmit},r.a.createElement(d.a,{className:"login__form-logo"}),this.state.error?r.a.createElement(h.a,{severity:"error"},this.state.error):null,r.a.createElement("div",{className:"login__form-input"},r.a.createElement(p.a,null),r.a.createElement("input",{ref:this.emailInput,type:"text",placeholder:"Email",required:!0})),r.a.createElement("div",{className:"login__form-input"},r.a.createElement(f.a,null),r.a.createElement("input",{ref:this.passwordInput,type:"password",placeholder:"Password",required:!0})),r.a.createElement("a",{className:"login__form-more",href:"#"},"Forgot password ?"),r.a.createElement("input",{className:"login__form-submit",type:"submit",value:"SIGN IN"})))}}]),a}(n.Component),j=(a(75),a(76),a(110)),I=a(104),O=a(105),S=a(106),C=a(107),k=a(108),D=a(5),U=(a(77),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).select=n.select.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"select",value:function(){this.props.history.push("/contacts/".concat(this.props.uid))}},{key:"render",value:function(){return r.a.createElement("button",{className:"contact",onClick:this.select},r.a.createElement(j.a,null),r.a.createElement("div",{style:{marginLeft:"0.5rem"}},r.a.createElement("h1",{className:"contact__name"},this.props.name||"New contact"),r.a.createElement("p",{className:"contact__description"},"The last message sent goes here")),r.a.createElement("p",{className:"contact__time"},"12:00:50"))}}]),a}(n.Component)),x=function(e){return r.a.createElement(U,Object.assign({},e,{history:Object(D.f)()}))},B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.newContactName=r.a.createRef(),n.newContactID=r.a.createRef(),n.searchBar=r.a.createRef(),n.newContact=n.newContact.bind(Object(m.a)(n)),n.searchContact=n.searchContact.bind(Object(m.a)(n)),n.state={contacts:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){_.collection("users").doc(b.auth().currentUser.uid).collection("contacts").get().then(function(e){var t=[];e.forEach((function(e){t.push(e.data())})),this.setState({contacts:t})}.bind(this))}},{key:"disconnect",value:function(){b.auth().signOut()}},{key:"newContact",value:function(e){e.preventDefault();var t=this.newContactName.current.value,a=this.newContactID.current.value;_.collection("users").where("id","==",parseInt(a)).get().then(function(e){if(e.empty)this.setState({error:"User not found, please verify the ID entered",success:void 0});else{if(e.docs[0].id===b.auth().currentUser.uid)return void this.setState({error:"You can't add yourself as a contact dumbass",success:void 0});_.collection("users").doc(b.auth().currentUser.uid).collection("contacts").doc(a).set({name:t,user:e.docs[0].ref}),this.setState({success:"Contact successfully added"})}}.bind(this)).catch(function(e){this.setState({error:e,success:void 0})}.bind(this))}},{key:"searchContact",value:function(){var e=this;document.querySelectorAll(".contact").forEach((function(t){t.querySelector(".contact__name").innerHTML.toLowerCase().includes(e.searchBar.current.value.toLowerCase())?t.classList.remove("contact-hide"):t.classList.add("contact-hide")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/new"},r.a.createElement("div",{className:"sidebar__header"},r.a.createElement(v.b,{to:"/"},r.a.createElement(y.a,null)),r.a.createElement("p",null,"New contact"),r.a.createElement("div",{className:"sidebar__header-options"},r.a.createElement("button",{onClick:this.disconnect},r.a.createElement(I.a,null)))),r.a.createElement("form",{className:"sidebar__content",style:{padding:"0 2rem"},onSubmit:this.newContact},r.a.createElement("div",{className:"sidebar__content-avatar"},r.a.createElement(j.a,null)),this.state.error?r.a.createElement(h.a,{severity:"error"},this.state.error):null,this.state.success?r.a.createElement(h.a,{severity:"success"},this.state.success):null,r.a.createElement("div",{className:"sidebar__content-input"},r.a.createElement(O.a,null),r.a.createElement("input",{ref:this.newContactName,type:"text",placeholder:"Contact name",required:!0})),r.a.createElement("div",{className:"sidebar__content-input"},r.a.createElement(S.a,null),r.a.createElement("input",{ref:this.newContactID,type:"text",placeholder:"XXXXXX",required:!0})),r.a.createElement("button",{className:"sidebar__content-option",type:"submit"},r.a.createElement(C.a,null)))),r.a.createElement(D.a,{path:"/"},r.a.createElement("div",{className:"sidebar__header"},r.a.createElement(j.a,null),r.a.createElement("div",{className:"sidebar__header-options"},r.a.createElement("button",{onClick:this.disconnect},r.a.createElement(I.a,null)))),r.a.createElement("div",{className:"sidebar__search"},r.a.createElement("div",{className:"sidebar__search-entry"},r.a.createElement("input",{onChange:this.searchContact,ref:this.searchBar,type:"text",placeholder:"Search a chat"}))),r.a.createElement("div",{className:"sidebar__content"},this.state.contacts.map((function(e){return r.a.createElement(x,{name:e.name,uid:e.user.id,key:e.user.id})})),r.a.createElement(v.b,{className:"sidebar__content-option",to:"/new"},r.a.createElement(k.a,null))))))}}]),a}(n.Component),R=(a(78),a(54)),L=a.n(R),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).message=r.a.createRef(),n.chatBox=r.a.createRef(),n.state={contact:[],conversationId:void 0,conversation:[]},n.sendMessage=n.sendMessage.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){_.collection("users").doc(b.auth().currentUser.uid).collection("contacts").get().then(function(e){var t,a=this;e.forEach((function(e){e.data().user.id==a.props.match.params.uid&&(t=e)})),t?this.setState({contact:t}):this.props.history.goBack()}.bind(this)),_.collection("conversations").where("participants","array-contains-any",[b.auth().currentUser.uid,this.props.match.params.uid]).onSnapshot(function(e){this.setState({conversationId:e.docs[0].id,conversation:e.docs[0].data()}),this.chatBox.current.scrollTo(0,this.chatBox.current.scrollHeight)}.bind(this))}},{key:"sendMessage",value:function(e){e.preventDefault(),""!==this.message.current.value&&(this.state.conversation.messages.push({content:this.message.current.value,from:b.auth().currentUser.uid,date:Date.now()}),_.collection("conversations").doc(this.state.conversationId).set(this.state.conversation))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"conversation"},r.a.createElement("div",{className:"conversation__header"},r.a.createElement(j.a,null),r.a.createElement("h1",{className:"conversation__header-title"},this.state.contact.name||"New contact"),r.a.createElement("button",{className:"conversation__header-back",onClick:function(){return e.props.history.goBack()}},r.a.createElement(y.a,null))),r.a.createElement("div",{ref:this.chatBox,className:"conversation__chat"},this.state.conversation.messages&&this.state.conversation.messages.map((function(e){return r.a.createElement("div",{className:"conversation__chat-message ".concat(e.from==b.auth().currentUser.uid?"me":"")},r.a.createElement(j.a,null),r.a.createElement("div",{className:"conversation__chat-messageContent"},r.a.createElement("p",null,e.content),r.a.createElement("div",{className:"conversation__chat-messageFooter"},r.a.createElement("span",{className:"conversation__chat-messageTime"},new Date(e.date).toLocaleTimeString()))))}))),r.a.createElement("form",{className:"conversation__footer",onSubmit:this.sendMessage},r.a.createElement("div",{className:"conversation__footer-entry"},r.a.createElement("input",{ref:this.message,type:"text",placeholder:"Type your message"})),r.a.createElement("button",{type:"submit"},r.a.createElement(L.a,null))))}}]),a}(n.Component),q=function(e){return r.a.createElement(M,Object.assign({},e,{history:Object(D.f)()}))},P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(B,null),r.a.createElement("div",{className:"main__content"},r.a.createElement(D.a,{path:"/contacts/:uid",component:q})))}}]),a}(n.Component),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){b.auth().onAuthStateChanged(function(e){this.setState({user:e})}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(v.a,null,r.a.createElement(w.a,null,r.a.createElement(D.a,{path:"/"},this.state.user?r.a.createElement(P,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(D.a,{path:"/login",component:N}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.6798012d.chunk.js.map